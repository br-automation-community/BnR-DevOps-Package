
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../Testing_2_TDD/">
      
      
        <link rel="next" href="../Testing_4_IntegrationTesting/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>B&R Unit Testing - DevOps Package</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2afb09e1.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#br-unit-testing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="DevOps Package" class="md-header__button md-logo" aria-label="DevOps Package" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DevOps Package
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              B&R Unit Testing
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="DevOps Package" class="md-nav__button md-logo" aria-label="DevOps Package" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    DevOps Package
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Project Management
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Project Management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ProjectManagement/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ProjectManagement_0_ProjectPlanning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Project Planning
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ProjectManagement_1_Jira/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Jira
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ProjectManagement_2_Confluence/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Confluence
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ProjectManagement_3_Bitbucket/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GitHub & Bitbucket
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ProjectManagement_4_OpenSourceLicensing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Open-Source Licensing
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Version Control
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Version Control
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VersionControl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VersionControl_01_BuildVersionFramework/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Build Version Framework
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VersionControl_0_SummaryOfTemplateFiles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Template Files
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VersionControl_1_Git/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Git
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VersionControl_2_Sourcetree/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sourcetree
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VersionControl_3_Commits/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Commits
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VersionControl_4_Branching/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Branching
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VersionControl_5_ResolvingMergeConflicts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Resolving Merge Conflicts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VersionControl_6_CodeReview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Code Review
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VersionControl_7_Versioning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Versioning
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VersionControl_8_Submodules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Submodules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VersionControl_9_Hooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hooks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VersionControl_10_ASProjectSettings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AS Project Settings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VersionControl_11_MigratingFromSVN/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Migrating from SVN
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Testing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Testing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Testing_0_TemplateFiles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Template Files
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Testing_1_TestPlan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Test Plan
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Testing_2_TDD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Test Driven Development
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    B&R Unit Testing
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    B&R Unit Testing
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introductory-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Introductory Resources
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dedicated-unit-test-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Dedicated Unit Test Configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tips-for-writing-in-c" class="md-nav__link">
    <span class="md-ellipsis">
      Tips for Writing in C
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#built-in-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Built-In Tests
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Test Structure
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#return-statements" class="md-nav__link">
    <span class="md-ellipsis">
      Return Statements
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Return Statements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-case-busy-and-abort-return-statements" class="md-nav__link">
    <span class="md-ellipsis">
      Use Case: Busy and Abort Return Statements
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-asserts" class="md-nav__link">
    <span class="md-ellipsis">
      Test Asserts
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#timeout-counter" class="md-nav__link">
    <span class="md-ellipsis">
      Timeout Counter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#strategy-for-uiconnect-commands-in-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Strategy for UIConnect Commands in Tests
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variable-mapping-file" class="md-nav__link">
    <span class="md-ellipsis">
      Variable Mapping File
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debugging" class="md-nav__link">
    <span class="md-ellipsis">
      Debugging
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#code-coverage" class="md-nav__link">
    <span class="md-ellipsis">
      Code Coverage
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Testing_4_IntegrationTesting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Integration Testing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Testing_5_ManualTesting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Manual Testing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Testing_6_StaticCodeAnalysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Static Code Analysis
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Automation and Build Server
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Automation and Build Server
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AutomationBuildServer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AutomationBuildServer_0_TemplateFiles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Template Files
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AutomationBuildServer_1_HowToUseJenkins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How to use Jenkins
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AutomationBuildServer_2_BnRJenkinsHelperLib/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    B&R-Jenkins Helper Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AutomationBuildServer_3_GettingStarted/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AutomationBuildServer_4_CreateDocker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Create Jenkins Agent Docker Container
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AutomationBuildServer_5_CreateJenkinsProject/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Create Jenkins Project
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AutomationBuildServer_6_CustomizingTheJenkinsfile/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Customizing the Jenkinsfile
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AutomationBuildServer_7_IntegrationWithBitbucket/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Integration with Bitbucket
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AutomationBuildServer_8_AutomatedDeployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Automated Deployment
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introductory-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Introductory Resources
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dedicated-unit-test-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Dedicated Unit Test Configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tips-for-writing-in-c" class="md-nav__link">
    <span class="md-ellipsis">
      Tips for Writing in C
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#built-in-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Built-In Tests
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Test Structure
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#return-statements" class="md-nav__link">
    <span class="md-ellipsis">
      Return Statements
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Return Statements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-case-busy-and-abort-return-statements" class="md-nav__link">
    <span class="md-ellipsis">
      Use Case: Busy and Abort Return Statements
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-asserts" class="md-nav__link">
    <span class="md-ellipsis">
      Test Asserts
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#timeout-counter" class="md-nav__link">
    <span class="md-ellipsis">
      Timeout Counter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#strategy-for-uiconnect-commands-in-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Strategy for UIConnect Commands in Tests
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variable-mapping-file" class="md-nav__link">
    <span class="md-ellipsis">
      Variable Mapping File
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debugging" class="md-nav__link">
    <span class="md-ellipsis">
      Debugging
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#code-coverage" class="md-nav__link">
    <span class="md-ellipsis">
      Code Coverage
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="br-unit-testing">B&amp;R Unit Testing</h1>
<h2 id="introductory-resources">Introductory Resources</h2>
<p>For a step-by-step guide on how to set up and use B&amp;R Unit Testing, refer to the guide from AutomationCON 2021. This has been included as a template file.</p>
<p><img alt="" src="../img/Testing25.png" /></p>
<h2 id="dedicated-unit-test-configuration">Dedicated Unit Test Configuration</h2>
<p>The unit test tasks should not be deployed on a commissioned machine. Therefore, you should have a dedicated configuration in the AS project for unit testing.</p>
<p><img alt="" src="../img/Testing26.png" /></p>
<h2 id="tips-for-writing-in-c">Tips for Writing in C</h2>
<p>B&amp;R Unit Tests must be written in the C programming language. The task under test can be written in any programming language (ST, ladder, etc), but the tests themselves have to be in C.</p>
<p>Here are a few tips / tricks to help you transition quickly from ST to C:</p>
<table>
<thead>
<tr>
<th>Topic</th>
<th>ST</th>
<th>C</th>
</tr>
</thead>
<tbody>
<tr>
<td>Assignment operator</td>
<td>:=</td>
<td>=</td>
</tr>
<tr>
<td>Address reference</td>
<td>ADR(var)</td>
<td>&amp;var</td>
</tr>
<tr>
<td>End of line</td>
<td>;</td>
<td>;</td>
</tr>
<tr>
<td>Comment</td>
<td>//</td>
<td>//</td>
</tr>
<tr>
<td>Equality</td>
<td>=</td>
<td>==</td>
</tr>
<tr>
<td>Inequality</td>
<td>&lt;&gt;</td>
<td>!=</td>
</tr>
<tr>
<td>“And” operator</td>
<td>AND</td>
<td>&amp;&amp;</td>
</tr>
<tr>
<td>“Or” operator</td>
<td>OR</td>
<td></td>
</tr>
<tr>
<td>“Not” operator</td>
<td>NOT</td>
<td>!</td>
</tr>
<tr>
<td>String boundary</td>
<td>‘</td>
<td>“</td>
</tr>
<tr>
<td>Dynamic variable</td>
<td><a href="https://help.br-automation.com/#/en/4/programming%2Fvariables%2Fprogrammingmodel_variables_dynamic.html">Link</a></td>
<td><a href="https://www.geeksforgeeks.org/c-pointers/">Link</a></td>
</tr>
</tbody>
</table>
<p>For loop:</p>
<table>
<thead>
<tr>
<th>ST</th>
<th>C</th>
</tr>
</thead>
<tbody>
<tr>
<td>FOR Var1 := 1 TO 9 DO<br>&emsp;//code<br>END_FOR</td>
<td>for (Var1 = 1; Var1&lt;10, Var1++)<br>&emsp;//code<br>}</td>
</tr>
</tbody>
</table>
<p>Case statement:</p>
<table>
<thead>
<tr>
<th>ST</th>
<th>C</th>
</tr>
</thead>
<tbody>
<tr>
<td>CASE (stateVar) OF<br>&ensp;STATE1: <br>&emsp;//code<br>&ensp;STATE2:<br>&emsp;//code<br>END_CASE</td>
<td>Switch (stateVar)<br>{<br>&ensp;case 1:<br>&emsp;//code<br>&emsp;break;<br>&ensp;case2:<br>&emsp;//code<br>&emsp;break;<br>}<br>break;</td>
</tr>
</tbody>
</table>
<p>If statement:</p>
<table>
<thead>
<tr>
<th>ST</th>
<th>C</th>
</tr>
</thead>
<tbody>
<tr>
<td>IF (condition) THEN<br>&emsp;//code<br>ELSIF(condition) THEN<br>&emsp;//code<br>ELSE<br>&emsp;//code<br>END_IF</td>
<td>if(condition) {<br>&emsp;//code<br>} <br>else if(condition) {<br>&emsp;//code<br>} <br>else {<br>&emsp;//code<br>}</td>
</tr>
</tbody>
</table>
<p>Also note in C if (i = 0) is perfectly valid and assigns 0 to i and evaluates as false.  Some people recommend reversing the statement so that the compiler will catch mistypes (e.g. if (0 = i) would not compile if you really meant if (0 == i))</p>
<p>And for loop exit condition is always &lt;= in ST but you can decide &lt; or &lt;= in C.</p>
<h2 id="built-in-tests">Built-In Tests</h2>
<p>The following tests are built into the B&amp;R Unit Testing framework. Use cases are provided in the template files.</p>
<ul>
<li>
<p>Setup &amp; Teardown</p>
<ul>
<li>These tests are used to clean things up before / after the tests run. More specifically:<ul>
<li>_SETUP_TEST: Runs before each individual test</li>
<li>_TEARDOWN_TEST: Runs after each individual test</li>
<li>_SETUP_SET: Runs before the entire group of tests in the test suite</li>
<li>_TEARDOWN_SET: Runs after the entire group of tests in the test suite</li>
</ul>
</li>
</ul>
</li>
<li>
<p><em>Cyclic code</em></p>
<ul>
<li>The _CYCLIC_SET test code is called once per program cycle, as long as the test set is active (in progress)</li>
<li>Use cases:<ul>
<li>Increment a timeout counter</li>
<li>Call mapp FUBs that are under test</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="test-structure">Test Structure</h2>
<p>Each test should have 3 fundamental sections:</p>
<ol>
<li>Arrange<ul>
<li>Sets up the test case</li>
<li>Any required settings, parameters, or other preparation needed for that specific test case should be performed here</li>
</ul>
</li>
<li>Act<ul>
<li>Calls the function to be tested</li>
<li>Act steps should cover the main thing to be tested</li>
</ul>
</li>
<li>Assert<ul>
<li>Assert expected outcome</li>
</ul>
</li>
</ol>
<p>For simple tests, this can be accomplished as shown below:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>_TEST testCase1(void)
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>{
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>// Arrange
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    instMyCalc.CalcOperator = splMyCalcOPERATOR_ADD; 
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>    instMyCalc.Param1 = 1; 
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>    instMyCalc.Param2 = 2;
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>// Act
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>    MyCalculator(&amp;instMyCalc);
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>// Assert
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>    TEST_ASSERT_EQUAL_INT(3, instMyCalc.Result ); 
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>    TEST_ASSERT_EQUAL_INT(ERR_OK, instMyCalc.Status );
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>}
</span></code></pre></div>
<p>For more advanced tests or tests for asynchronous function blocks, these sections should be implemented in a case statement.</p>
<p>This allows the FUBs to be called until they complete the asynchronous action (since they are called within _CYCLIC_SET).</p>
<p>For example: </p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>_TEST PowerOn(void)
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>{   
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>    TIMEOUT_TEST_CASE    
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>    switch (TestState)    
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>  {        
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>        case TEST_ARRANGE:          
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>            TestState = TEST_ACT;        
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>        break;        
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>        case TEST_ACT:            
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>            switch (ActSubState)            
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>            {                
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>                case 0:                    
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>                    AxisControl.Command.Power = true;                    
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>                    ActSubState = 1;                
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>                break;                
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>                case 1:                    
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>                    TEST_BUSY_CONDITION(AxisControl.Status.Busy == true);                    
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>                    TestState = TEST_ASSERT;                
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>                break;            
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>            }        
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>        break;        
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>        case TEST_ASSERT:            
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>            TEST_ASSERT(AxisControl.Status.IsPowered);            
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a>            TEST_DONE;        
</span><span id="__span-1-28"><a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a>        break;    
</span><span id="__span-1-29"><a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a>    }
</span><span id="__span-1-30"><a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a>
</span><span id="__span-1-31"><a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a>    TEST_BUSY;
</span><span id="__span-1-32"><a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a>}
</span></code></pre></div>
<h2 id="return-statements">Return Statements</h2>
<p>Each test must always provide a return statement in every scan of the test. The possible return statements are Busy, Abort, or Done (full list shown below). </p>
<p><img alt="" src="../img/Testing34.png" /></p>
<p>It is common practice to put TEST_BUSY outside of your case statement so that the default return statement is that the test is busy.</p>
<p>When one of these return statements is executed, the test immediately ends. No subsequent code will run. Therefore, in the screenshot below, we don’t technically need the “break;” after TEST_DONE, but it is included for clarity nonetheless. This also means that you should have your FUB calls at the top of the test, rather than at the end. </p>
<p><img alt="" src="../img/Testing35.png" /></p>
<h3 id="use-case-busy-and-abort-return-statements">Use Case: Busy and Abort Return Statements</h3>
<p>If you are testing asynchronous function blocks, utilize the Busy and Abort conditions to allow for the FUB to finish processing.</p>
<p>Use TEST_BUSY_CONDITION(fub.Busy == false) or TEST_BUSY_CONDITION(fub.Status == 65535) to wait for the FUB to finish being busy.</p>
<p>Use TEST_ABORT_CONDITION(fub.Status != 0) to abort the test in the event of an error.</p>
<p>Examples:</p>
<ul>
<li>DirInfo(&amp;DirInfo_UT);</li>
<li>TEST_BUSY_CONDITION(DirInfo_UT.status == 65535);</li>
<li>TEST_ABORT_CONDITION(DirInfo_UT.status != 0);</li>
</ul>
<h2 id="test-asserts">Test Asserts</h2>
<p>An assert statement is used to declare the expected/passing result of the test.</p>
<p>The most basic assert is TEST_ASSERT(condition), where the asserted condition is a Boolean value.</p>
<p>A full list of available asserts is availabne <a href="https://help.br-automation.com/#/en/4/technologysolutions%2Fts_unittest%2Flibraries%2Funittest%2Fts_ut_available_basic_asserts.html">here</a>. </p>
<h2 id="timeout-counter">Timeout Counter</h2>
<p>It recommended to implement a timeout counter to fail a test if it gets stuck for too long. The test will be failed if the counter exceeds a certain value. </p>
<p>To implement the timeout counter:</p>
<ol>
<li>Copy the code for the TIMEOUT_TEST_CASE macro (within the template test file) to the top of your test suite file (right beneath the #include section). This macro will force the test to fail if the cycleCount is exceeded. The rest of the tests in the test suite will subsequently run as usual.</li>
<li>Adjust the cycleCount to a value that makes sense for your testing</li>
<li>Declare the following variables test task variable file:<ul>
<li>“ActSubState” of type USINT</li>
<li>“cycleCount” of type USINT</li>
</ul>
</li>
<li>Within _CYCLIC_SET, increment cycleCount (cycleCount++)</li>
<li>Call TIMEOUT_TEST_CASE at the top of each test</li>
<li>Now, each test will be protected from getting stuck / never ending</li>
</ol>
<p><img alt="" src="../img/Testing37.png" /></p>
<h2 id="strategy-for-uiconnect-commands-in-tests">Strategy for UIConnect Commands in Tests</h2>
<p>If you need to use commands from a UIConnect structure in a test, you must follow this order of operations within a case statement:</p>
<ul>
<li>Trigger the command</li>
<li>Wait for the status that the command is in progress (whatever that may be)</li>
<li>Wait for it to return to idle</li>
<li>Then SOMETIMES wait for it to refresh (it’ll automatically do this depending on what command you run)</li>
<li>Wait for it to return to idle AGAIN</li>
<li><em>Then</em>  you can move on in your testing process</li>
</ul>
<p>Not following this order of operations causes intermittent failures.</p>
<p>Example: Note that the UIConnect case statement is embedded within the TEST_ACT case of the overall case statement.</p>
<p><img alt="" src="../img/Testing38.png" /></p>
<h2 id="variable-mapping-file">Variable Mapping File</h2>
<p>In most (if not all) tests, you will need to use a value of a local variable within the task under test within the unit test. To get that variable data into the unit test task, use a Variable Mapping File (.vvm). </p>
<p>Steps:</p>
<ol>
<li>Add the local variable and type file of the task under test as a reference to the unit test task<ul>
<li>This way, the unit test task has its own instance of every variable within the task under test</li>
</ul>
</li>
<li>Add a Variable Mapping File (.vvm) to the unit test configuration</li>
<li>Within the .vvm, map the local variables from the task under test to the equivalent local variable instances within the unit test task.<ul>
<li>Variable mapping goes in both directions: inputs from the task under test to the unit test task, and outputs from the unit test task to the task under test</li>
</ul>
</li>
</ol>
<p><img alt="" src="../img/Testing39.png" /></p>
<ul>
<li>Note that you cannot directly map function block outputs from the task under test to the unit test task function block outputs</li>
<li>As a result, you need to make a "middle man" structure to capture the value of the FUB outputs and bring them in to the unit test task</li>
<li>In the screenshot above, this corresponds to the MpBlockStatus structure in the unit test task</li>
</ul>
<h2 id="debugging">Debugging</h2>
<p>Breakpoints can be set directly in the unit test code. Therefore, when a unit test fails, use the debugger to troubleshoot the problem.</p>
<p><img alt="" src="../img/Testing41.png" /></p>
<h2 id="code-coverage">Code Coverage</h2>
<p>With code coverage enabled you can see how much of you code is covered by your testing.  This can help assess the quality of your test cases.<br />
Code coverage in Automation Studio only works for C/C++ tasks/libraries and GCC 6.3.0</p>
<p><a href="https://github.com/br-automation-community/EmbGcov-Demo">EmbGCov-Demo project</a></p>
<p>Usage:</p>
<ol>
<li>Install gcov.  See <a href="https://gcovr.com/en/stable/installation.html">here</a> for installation instructions</li>
<li>Add the Unittest solution with version 2.0.1.65</li>
<li>Add the EmbGcov and EmbGcovW library ( Make sure to deploy both libraries in the PLC )</li>
<li>Change the GCC version to '6.3.0' and add the '\Logical\Libraries\EmbGcov' to the additional include directories<br />
<img alt="" src="../img/Testing%20-%20gcov%20-%20CompilerAndAdditionIncludeDirs.jpg" /></li>
<li>Add the '--codecoverage' to the Additional build options in the task and or library
    <img alt="" src="../img/Testing%20-%20gcov%20-%20AddCoverageToTask.jpg" /></li>
<li>Extend the TEARDOWN_SET<ul>
<li>Include the EmbGcov.h</li>
<li>Add the function 'EmbGcovExit();' so that after the test is complete the data is saved to the harddrive.</li>
<li>In case of a pure C task add a dummy C++ file with the bur_heap_size declaration. This will add some implementations we need.</li>
<li>In case you want to use code coverage on a library add a dummy function with the 'EmbGcovExit();' as well. ( If it's a dynamic library please add the function in a CPP file )</li>
</ul>
</li>
<li>Run the python script to generate the report<ul>
<li>
<div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>    C:\&gt;python ProcessCodeCoverage.py --project &lt;project path&gt; --config TS_UnitTest_Sample
</span></code></pre></div>
</li>
</ul>
</li>
</ol>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "content.code.copy"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>